# HTTP协议基础及发展历史

## 五层网络模型

物理层主要作用是定义物理设备如何传输数据，机器的硬件，网卡端口，网线等。

数据链路层在通信的实体间建立数据链路连接，比如最基础的数据传输数据流，可以自己选择二进制或者ASCII码形式等。

网络层为数据在结点之间创建逻辑链路，比如输入百度，网络层会为我们找到百度的网址，如何寻找到的过程就是网络层要做的事。

传输层：向用户提供可靠的端到端(End-to-End)服务。

应用层：为应用软件提供了很多服务，帮我们实现了HTTP协议，我们只要按照规则去使用HTTP协议；它构建于TCP协议之上；屏蔽了网络传输相关细节。

![五层模型](~@image/fiveLevelModel.png)

## HTTP协议的发展历史

### HTTP/0.9

最早的HTTP版本是0.9，它只有一个命令GET，没有HEADER等描述数据的信息，服务器发送完毕后，就关闭了TCP连接。

### HTTP/1.0

HTTP1.0增加了很多命令，比如POST, PUT, HEADER等，增加了status code 和 header，增加就多字符集的支持、多部分发送、权限、缓存等。

### HTTP/1.1

1. 在1.0的基础上增加了持久连接，原来一个HTTP请求就需要开启一个TCP连接，当请求完成后TCP连接就关闭了。创建TCP连接消耗是比较高的，延迟也会比较高，所以能够在建立完HTTP请求后不关闭TCP连接，后面新的HTTP请求依然使用该TCP连接的话，性能肯定会比较高。

2. 增加了pipeline。虽然我们的客户端能够在同一个TCP连接里面发送多个HTTP请求，但是在服务端我们对于进来的请求都是要按照顺序的进行返回。如果前一个请求的等待时间比较久
，而后一个请求处理比较快的话，后一个请求也不能先发送给客户端，先要等第一个请求数据发送完毕后才能发送，这里就有一个串行和并行的关系，这个问题在HTTP2里面进行了优化。

3. 增加了host和其他一些命令

### HTTP2

1. 在HTTP2里面所有的数据都是以二进制（最小数据单位是帧）传输，在HTTP1.1里面大部分是通过字符串传输的，所以数据的分片方式是不一样的。

2. 同一个连接里面发送多个请求不再需要按照顺序来

::: tip
原有请求是需要按照顺序来的，服务器端可以返回第一个请求的同时返回第二个请求
:::

3. 头信息压缩以及推送等提高效率的功能

::: tip
原有的请求中的头信息是全部发送的，比较消耗性能，头信息压缩后可以有效的减少带宽使用。原有的服务端都是被动的，在HTTP2中服务端可以作为主动方进行推送。
:::

## HTTP的三次握手

## URI-URL和URN

## HTTP报文格式

## 创建一个最简单的web服务